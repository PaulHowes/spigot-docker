/*
 * This file was generated by the Gradle 'init' task.
 *
 * This is a general purpose Gradle build.
 * Learn how to create Gradle builds at https://guides.gradle.org/creating-new-gradle-builds/
 */
plugins {
    id 'de.undercouch.download' version '3.4.3'
    id 'com.palantir.docker' version '0.20.1'
}

task download(type: Download) {
    group 'Build'
    description 'Downloads the Spigot build tools.'
    src 'https://hub.spigotmc.org/jenkins/job/BuildTools/lastSuccessfulBuild/artifact/target/BuildTools.jar'
    dest buildDir
}

task build(type: Exec, dependsOn: 'download') {
    group 'Build'
    description 'Builds the Spigot server.'
    workingDir buildDir
    commandLine 'java', '-jar', 'BuildTools.jar', '--rev', '1.13.1'
}

docker() {
    name 'spigot'
}